{"ast":null,"code":"import _objectSpread from\"/Users/anthonycarnero/Documents/GitHub/algointeract_App/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";/**\n * @module Graph/builder\n * @description\n * Offers a series of methods that isolate the way graph elements are built (nodes and links mainly).\n */import CONST from\"./graph.const\";import{buildLinkPathDefinition}from\"../link/link.helper\";import{getMarkerId}from\"../marker/marker.helper\";/**\n * Get the correct node opacity in order to properly make decisions based on context such as currently highlighted node.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @returns {number} the opacity value for the given node.\n * @memberof Graph/builder\n */function _getNodeOpacity(node,highlightedNode,highlightedLink,config){var highlight=node.highlighted||node.id===(highlightedLink&&highlightedLink.source)||node.id===(highlightedLink&&highlightedLink.target);var someLinkHighlighted=highlightedLink&&highlightedLink.source&&highlightedLink.target;var someNodeHighlighted=!!(highlightedNode||someLinkHighlighted);var opacity;if(someNodeHighlighted&&config.highlightDegree===0){opacity=highlight?config.node.opacity:config.highlightOpacity;}else if(someNodeHighlighted){opacity=highlight?config.node.opacity:config.highlightOpacity;}else{opacity=node.opacity||config.node.opacity;}return opacity;}/**\n * Build some Link properties based on given parameters.\n * @param  {Object} link - the link object for which we will generate properties.\n * @param  {Object.<string, Object>} nodes - same as {@link #graphrenderer|nodes in renderGraph}.\n * @param  {Object.<string, Object>} links - same as {@link #graphrenderer|links in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} linkCallbacks - same as {@link #graphrenderer|linkCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns an object that aggregates all props for creating respective Link component instance.\n * @memberof Graph/builder\n */function buildLinkProps(link,nodes,links,config,linkCallbacks,highlightedNode,highlightedLink,transform){var _nodes$source,_nodes$source2,_nodes$target,_nodes$target2;var source=link.source,target=link.target;var x1=(nodes===null||nodes===void 0?void 0:(_nodes$source=nodes[source])===null||_nodes$source===void 0?void 0:_nodes$source.x)||0;var y1=(nodes===null||nodes===void 0?void 0:(_nodes$source2=nodes[source])===null||_nodes$source2===void 0?void 0:_nodes$source2.y)||0;var x2=(nodes===null||nodes===void 0?void 0:(_nodes$target=nodes[target])===null||_nodes$target===void 0?void 0:_nodes$target.x)||0;var y2=(nodes===null||nodes===void 0?void 0:(_nodes$target2=nodes[target])===null||_nodes$target2===void 0?void 0:_nodes$target2.y)||0;var type=link.type||config.link.type;var d=buildLinkPathDefinition({source:{x:x1,y:y1},target:{x:x2,y:y2}},type);var mainNodeParticipates=false;switch(config.highlightDegree){case 0:break;case 2:mainNodeParticipates=true;break;default:// 1st degree is the fallback behavior\nmainNodeParticipates=source===highlightedNode||target===highlightedNode;break;}var guiltyNode=mainNodeParticipates&&nodes[source].highlighted&&nodes[target].highlighted;var guiltyLink=source===(highlightedLink&&highlightedLink.source)&&target===(highlightedLink&&highlightedLink.target);var highlight=guiltyNode||guiltyLink;var opacity=link.opacity||config.link.opacity;if(highlightedNode||highlightedLink&&highlightedLink.source){opacity=highlight?config.link.opacity:config.highlightOpacity;}var stroke=link.color||config.link.color;if(highlight){stroke=config.link.highlightColor===CONST.KEYWORDS.SAME?config.link.color:config.link.highlightColor;}var strokeWidth=(link.strokeWidth||config.link.strokeWidth)*(1/transform);if(config.link.semanticStrokeWidth){var linkValue=links[source][target]||links[target][source]||1;strokeWidth+=linkValue*strokeWidth/10;}var markerId=config.directed?getMarkerId(highlight,transform,config):null;var t=1/transform;var fontSize=null,fontColor=null,fontWeight=null,label=null;if(config.link.renderLabel){if(typeof config.link.labelProperty===\"function\"){label=config.link.labelProperty(link);}else{label=link[config.link.labelProperty];}fontSize=link.fontSize||config.link.fontSize;fontColor=link.fontColor||config.link.fontColor;fontWeight=highlight?config.link.highlightFontWeight:config.link.fontWeight;}return{className:CONST.LINK_CLASS_NAME,d:d,fontColor:fontColor,fontSize:fontSize*t,fontWeight:fontWeight,label:label,markerId:markerId,mouseCursor:config.link.mouseCursor,opacity:opacity,source:source,stroke:stroke,strokeWidth:strokeWidth,target:target,onClickLink:linkCallbacks.onClickLink,onMouseOutLink:linkCallbacks.onMouseOutLink,onMouseOverLink:linkCallbacks.onMouseOverLink,onRightClickLink:linkCallbacks.onRightClickLink};}/**\n * Build some Node properties based on given parameters.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} nodeCallbacks - same as {@link #graphrenderer|nodeCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns object that contain Link props ready to be feeded to the Link component.\n * @memberof Graph/builder\n */function buildNodeProps(node,config){var nodeCallbacks=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var highlightedNode=arguments.length>3?arguments[3]:undefined;var highlightedLink=arguments.length>4?arguments[4]:undefined;var transform=arguments.length>5?arguments[5]:undefined;var highlight=node.highlighted||node.id===(highlightedLink&&highlightedLink.source)||node.id===(highlightedLink&&highlightedLink.target);var opacity=_getNodeOpacity(node,highlightedNode,highlightedLink,config);var fill=node.color||config.node.color;if(highlight&&config.node.highlightColor!==CONST.KEYWORDS.SAME){fill=config.node.highlightColor;}var stroke=node.strokeColor||config.node.strokeColor;if(highlight&&config.node.highlightStrokeColor!==CONST.KEYWORDS.SAME){stroke=config.node.highlightStrokeColor;}var label=node[config.node.labelProperty]||node.id;if(typeof config.node.labelProperty===\"function\"){label=config.node.labelProperty(node);}var strokeWidth=node.strokeWidth||config.node.strokeWidth;if(highlight&&config.node.highlightStrokeWidth!==CONST.KEYWORDS.SAME){strokeWidth=config.node.highlightStrokeWidth;}var t=1/transform;var nodeSize=node.size||config.node.size;var fontSize=highlight?config.node.highlightFontSize:config.node.fontSize;var dx=fontSize*t+nodeSize/100+1.5;var svg=node.svg||config.node.svg;var fontColor=node.fontColor||config.node.fontColor;return _objectSpread({},node,{className:CONST.NODE_CLASS_NAME,cursor:config.node.mouseCursor,// NODE DEFAULT LOCATION\ncx:(node===null||node===void 0?void 0:node.x)||// eslint-disable-next-line no-restricted-globals\nscreen.width/3*(Math.random()*(0.8- -0.8)+0.8).toFixed(2),// NODE DEFAULT LOCATION\ncy:(node===null||node===void 0?void 0:node.y)||// eslint-disable-next-line no-restricted-globals\nscreen.height/3*(Math.random()*(0.5- -0.5)+0.5).toFixed(2),dx:dx,fill:fill,fontColor:fontColor,fontSize:fontSize*t,fontWeight:highlight?config.node.highlightFontWeight:config.node.fontWeight,id:node.id,label:label,opacity:opacity,overrideGlobalViewGenerator:!node.viewGenerator&&node.svg,renderLabel:node.renderLabel||config.node.renderLabel,size:nodeSize*t,stroke:stroke,strokeWidth:strokeWidth*t,svg:svg,type:node.symbolType||config.node.symbolType,viewGenerator:node.viewGenerator||config.node.viewGenerator,onClickNode:nodeCallbacks.onClickNode,onMouseOut:nodeCallbacks.onMouseOut,onMouseOverNode:nodeCallbacks.onMouseOverNode,onRightClickNode:nodeCallbacks.onRightClickNode});}export{buildLinkProps,buildNodeProps};","map":{"version":3,"sources":["/Users/anthonycarnero/Documents/GitHub/algointeract_App/frontend/src/components/Visualizer/Graph/Graph/graph/graph.builder.js"],"names":["CONST","buildLinkPathDefinition","getMarkerId","_getNodeOpacity","node","highlightedNode","highlightedLink","config","highlight","highlighted","id","source","target","someLinkHighlighted","someNodeHighlighted","opacity","highlightDegree","highlightOpacity","buildLinkProps","link","nodes","links","linkCallbacks","transform","x1","x","y1","y","x2","y2","type","d","mainNodeParticipates","guiltyNode","guiltyLink","stroke","color","highlightColor","KEYWORDS","SAME","strokeWidth","semanticStrokeWidth","linkValue","markerId","directed","t","fontSize","fontColor","fontWeight","label","renderLabel","labelProperty","highlightFontWeight","className","LINK_CLASS_NAME","mouseCursor","onClickLink","onMouseOutLink","onMouseOverLink","onRightClickLink","buildNodeProps","nodeCallbacks","fill","strokeColor","highlightStrokeColor","highlightStrokeWidth","nodeSize","size","highlightFontSize","dx","svg","NODE_CLASS_NAME","cursor","cx","screen","width","Math","random","toFixed","cy","height","overrideGlobalViewGenerator","viewGenerator","symbolType","onClickNode","onMouseOut","onMouseOverNode","onRightClickNode"],"mappings":"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","sourcesContent":["/**\n * @module Graph/builder\n * @description\n * Offers a series of methods that isolate the way graph elements are built (nodes and links mainly).\n */\nimport CONST from \"./graph.const\";\n\nimport { buildLinkPathDefinition } from \"../link/link.helper\";\nimport { getMarkerId } from \"../marker/marker.helper\";\n\n/**\n * Get the correct node opacity in order to properly make decisions based on context such as currently highlighted node.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @returns {number} the opacity value for the given node.\n * @memberof Graph/builder\n */\nfunction _getNodeOpacity(node, highlightedNode, highlightedLink, config) {\n  const highlight =\n    node.highlighted ||\n    node.id === (highlightedLink && highlightedLink.source) ||\n    node.id === (highlightedLink && highlightedLink.target);\n  const someLinkHighlighted =\n    highlightedLink && highlightedLink.source && highlightedLink.target;\n  const someNodeHighlighted = !!(highlightedNode || someLinkHighlighted);\n\n  let opacity;\n\n  if (someNodeHighlighted && config.highlightDegree === 0) {\n    opacity = highlight ? config.node.opacity : config.highlightOpacity;\n  } else if (someNodeHighlighted) {\n    opacity = highlight ? config.node.opacity : config.highlightOpacity;\n  } else {\n    opacity = node.opacity || config.node.opacity;\n  }\n\n  return opacity;\n}\n\n/**\n * Build some Link properties based on given parameters.\n * @param  {Object} link - the link object for which we will generate properties.\n * @param  {Object.<string, Object>} nodes - same as {@link #graphrenderer|nodes in renderGraph}.\n * @param  {Object.<string, Object>} links - same as {@link #graphrenderer|links in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} linkCallbacks - same as {@link #graphrenderer|linkCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns an object that aggregates all props for creating respective Link component instance.\n * @memberof Graph/builder\n */\nfunction buildLinkProps(\n  link,\n  nodes,\n  links,\n  config,\n  linkCallbacks,\n  highlightedNode,\n  highlightedLink,\n  transform\n) {\n  const { source, target } = link;\n  const x1 = nodes?.[source]?.x || 0;\n  const y1 = nodes?.[source]?.y || 0;\n  const x2 = nodes?.[target]?.x || 0;\n  const y2 = nodes?.[target]?.y || 0;\n  const type = link.type || config.link.type;\n  const d = buildLinkPathDefinition(\n    { source: { x: x1, y: y1 }, target: { x: x2, y: y2 } },\n    type\n  );\n\n  let mainNodeParticipates = false;\n\n  switch (config.highlightDegree) {\n    case 0:\n      break;\n    case 2:\n      mainNodeParticipates = true;\n      break;\n    default:\n      // 1st degree is the fallback behavior\n      mainNodeParticipates =\n        source === highlightedNode || target === highlightedNode;\n      break;\n  }\n\n  const guiltyNode =\n    mainNodeParticipates &&\n    nodes[source].highlighted &&\n    nodes[target].highlighted;\n  const guiltyLink =\n    source === (highlightedLink && highlightedLink.source) &&\n    target === (highlightedLink && highlightedLink.target);\n  const highlight = guiltyNode || guiltyLink;\n\n  let opacity = link.opacity || config.link.opacity;\n\n  if (highlightedNode || (highlightedLink && highlightedLink.source)) {\n    opacity = highlight ? config.link.opacity : config.highlightOpacity;\n  }\n\n  let stroke = link.color || config.link.color;\n\n  if (highlight) {\n    stroke =\n      config.link.highlightColor === CONST.KEYWORDS.SAME\n        ? config.link.color\n        : config.link.highlightColor;\n  }\n\n  let strokeWidth =\n    (link.strokeWidth || config.link.strokeWidth) * (1 / transform);\n\n  if (config.link.semanticStrokeWidth) {\n    const linkValue = links[source][target] || links[target][source] || 1;\n\n    strokeWidth += (linkValue * strokeWidth) / 10;\n  }\n\n  const markerId = config.directed\n    ? getMarkerId(highlight, transform, config)\n    : null;\n\n  const t = 1 / transform;\n\n  let fontSize = null,\n    fontColor = null,\n    fontWeight = null,\n    label = null;\n\n  if (config.link.renderLabel) {\n    if (typeof config.link.labelProperty === \"function\") {\n      label = config.link.labelProperty(link);\n    } else {\n      label = link[config.link.labelProperty];\n    }\n\n    fontSize = link.fontSize || config.link.fontSize;\n    fontColor = link.fontColor || config.link.fontColor;\n    fontWeight = highlight\n      ? config.link.highlightFontWeight\n      : config.link.fontWeight;\n  }\n\n  return {\n    className: CONST.LINK_CLASS_NAME,\n    d,\n    fontColor,\n    fontSize: fontSize * t,\n    fontWeight,\n    label,\n    markerId,\n    mouseCursor: config.link.mouseCursor,\n    opacity,\n    source,\n    stroke,\n    strokeWidth,\n    target,\n    onClickLink: linkCallbacks.onClickLink,\n    onMouseOutLink: linkCallbacks.onMouseOutLink,\n    onMouseOverLink: linkCallbacks.onMouseOverLink,\n    onRightClickLink: linkCallbacks.onRightClickLink,\n  };\n}\n\n/**\n * Build some Node properties based on given parameters.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} nodeCallbacks - same as {@link #graphrenderer|nodeCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns object that contain Link props ready to be feeded to the Link component.\n * @memberof Graph/builder\n */\nfunction buildNodeProps(\n  node,\n  config,\n  nodeCallbacks = {},\n  highlightedNode,\n  highlightedLink,\n  transform\n) {\n  const highlight =\n    node.highlighted ||\n    node.id === (highlightedLink && highlightedLink.source) ||\n    node.id === (highlightedLink && highlightedLink.target);\n  const opacity = _getNodeOpacity(\n    node,\n    highlightedNode,\n    highlightedLink,\n    config\n  );\n\n  let fill = node.color || config.node.color;\n\n  if (highlight && config.node.highlightColor !== CONST.KEYWORDS.SAME) {\n    fill = config.node.highlightColor;\n  }\n\n  let stroke = node.strokeColor || config.node.strokeColor;\n\n  if (highlight && config.node.highlightStrokeColor !== CONST.KEYWORDS.SAME) {\n    stroke = config.node.highlightStrokeColor;\n  }\n\n  let label = node[config.node.labelProperty] || node.id;\n\n  if (typeof config.node.labelProperty === \"function\") {\n    label = config.node.labelProperty(node);\n  }\n\n  let strokeWidth = node.strokeWidth || config.node.strokeWidth;\n\n  if (highlight && config.node.highlightStrokeWidth !== CONST.KEYWORDS.SAME) {\n    strokeWidth = config.node.highlightStrokeWidth;\n  }\n\n  const t = 1 / transform;\n  const nodeSize = node.size || config.node.size;\n  const fontSize = highlight\n    ? config.node.highlightFontSize\n    : config.node.fontSize;\n  const dx = fontSize * t + nodeSize / 100 + 1.5;\n  const svg = node.svg || config.node.svg;\n  const fontColor = node.fontColor || config.node.fontColor;\n\n  return {\n    ...node,\n    className: CONST.NODE_CLASS_NAME,\n    cursor: config.node.mouseCursor,\n    // NODE DEFAULT LOCATION\n    cx:\n      node?.x ||\n      // eslint-disable-next-line no-restricted-globals\n      (screen.width / 3) * (Math.random() * (0.8 - -0.8) + 0.8).toFixed(2),\n    // NODE DEFAULT LOCATION\n    cy:\n      node?.y ||\n      // eslint-disable-next-line no-restricted-globals\n      (screen.height / 3) * (Math.random() * (0.5 - -0.5) + 0.5).toFixed(2),\n    dx,\n    fill,\n    fontColor,\n    fontSize: fontSize * t,\n    fontWeight: highlight\n      ? config.node.highlightFontWeight\n      : config.node.fontWeight,\n    id: node.id,\n    label,\n    opacity,\n    overrideGlobalViewGenerator: !node.viewGenerator && node.svg,\n    renderLabel: node.renderLabel || config.node.renderLabel,\n    size: nodeSize * t,\n    stroke,\n    strokeWidth: strokeWidth * t,\n    svg,\n    type: node.symbolType || config.node.symbolType,\n    viewGenerator: node.viewGenerator || config.node.viewGenerator,\n    onClickNode: nodeCallbacks.onClickNode,\n    onMouseOut: nodeCallbacks.onMouseOut,\n    onMouseOverNode: nodeCallbacks.onMouseOverNode,\n    onRightClickNode: nodeCallbacks.onRightClickNode,\n  };\n}\n\nexport { buildLinkProps, buildNodeProps };\n"]},"metadata":{},"sourceType":"module"}