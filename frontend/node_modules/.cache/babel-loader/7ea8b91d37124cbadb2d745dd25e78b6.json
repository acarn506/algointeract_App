{"ast":null,"code":"/**\n * @module Graph/builder\n * @description\n * Offers a series of methods that isolate the way graph elements are built (nodes and links mainly).\n */\nimport CONST from \"./graph.const\";\nimport { buildLinkPathDefinition } from \"../link/link.helper\";\nimport { getMarkerId } from \"../marker/marker.helper\";\n/**\n * Get the correct node opacity in order to properly make decisions based on context such as currently highlighted node.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @returns {number} the opacity value for the given node.\n * @memberof Graph/builder\n */\n\nfunction _getNodeOpacity(node, highlightedNode, highlightedLink, config) {\n  const highlight = node.highlighted || node.id === (highlightedLink && highlightedLink.source) || node.id === (highlightedLink && highlightedLink.target);\n  const someLinkHighlighted = highlightedLink && highlightedLink.source && highlightedLink.target;\n  const someNodeHighlighted = !!(highlightedNode || someLinkHighlighted);\n  let opacity;\n\n  if (someNodeHighlighted && config.highlightDegree === 0) {\n    opacity = highlight ? config.node.opacity : config.highlightOpacity;\n  } else if (someNodeHighlighted) {\n    opacity = highlight ? config.node.opacity : config.highlightOpacity;\n  } else {\n    opacity = node.opacity || config.node.opacity;\n  }\n\n  return opacity;\n}\n/**\n * Build some Link properties based on given parameters.\n * @param  {Object} link - the link object for which we will generate properties.\n * @param  {Object.<string, Object>} nodes - same as {@link #graphrenderer|nodes in renderGraph}.\n * @param  {Object.<string, Object>} links - same as {@link #graphrenderer|links in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} linkCallbacks - same as {@link #graphrenderer|linkCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns an object that aggregates all props for creating respective Link component instance.\n * @memberof Graph/builder\n */\n\n\nfunction buildLinkProps(link, nodes, links, config, linkCallbacks, highlightedNode, highlightedLink, transform) {\n  var _nodes$source, _nodes$source2, _nodes$target, _nodes$target2;\n\n  const {\n    source,\n    target\n  } = link;\n  const x1 = (nodes === null || nodes === void 0 ? void 0 : (_nodes$source = nodes[source]) === null || _nodes$source === void 0 ? void 0 : _nodes$source.x) || 0;\n  const y1 = (nodes === null || nodes === void 0 ? void 0 : (_nodes$source2 = nodes[source]) === null || _nodes$source2 === void 0 ? void 0 : _nodes$source2.y) || 0;\n  const x2 = (nodes === null || nodes === void 0 ? void 0 : (_nodes$target = nodes[target]) === null || _nodes$target === void 0 ? void 0 : _nodes$target.x) || 0;\n  const y2 = (nodes === null || nodes === void 0 ? void 0 : (_nodes$target2 = nodes[target]) === null || _nodes$target2 === void 0 ? void 0 : _nodes$target2.y) || 0;\n  const type = link.type || config.link.type;\n  const d = buildLinkPathDefinition({\n    source: {\n      x: x1,\n      y: y1\n    },\n    target: {\n      x: x2,\n      y: y2\n    }\n  }, type);\n  let mainNodeParticipates = false;\n\n  switch (config.highlightDegree) {\n    case 0:\n      break;\n\n    case 2:\n      mainNodeParticipates = true;\n      break;\n\n    default:\n      // 1st degree is the fallback behavior\n      mainNodeParticipates = source === highlightedNode || target === highlightedNode;\n      break;\n  }\n\n  const guiltyNode = mainNodeParticipates && nodes[source].highlighted && nodes[target].highlighted;\n  const guiltyLink = source === (highlightedLink && highlightedLink.source) && target === (highlightedLink && highlightedLink.target);\n  const highlight = guiltyNode || guiltyLink;\n  let opacity = link.opacity || config.link.opacity;\n\n  if (highlightedNode || highlightedLink && highlightedLink.source) {\n    opacity = highlight ? config.link.opacity : config.highlightOpacity;\n  }\n\n  let stroke = link.color || config.link.color;\n\n  if (highlight) {\n    stroke = config.link.highlightColor === CONST.KEYWORDS.SAME ? config.link.color : config.link.highlightColor;\n  }\n\n  let strokeWidth = (link.strokeWidth || config.link.strokeWidth) * (1 / transform);\n\n  if (config.link.semanticStrokeWidth) {\n    const linkValue = links[source][target] || links[target][source] || 1;\n    strokeWidth += linkValue * strokeWidth / 10;\n  }\n\n  const markerId = config.directed ? getMarkerId(highlight, transform, config) : null;\n  const t = 1 / transform;\n  let fontSize = null,\n      fontColor = null,\n      fontWeight = null,\n      label = null;\n\n  if (config.link.renderLabel) {\n    if (typeof config.link.labelProperty === \"function\") {\n      label = config.link.labelProperty(link);\n    } else {\n      label = link[config.link.labelProperty];\n    }\n\n    fontSize = link.fontSize || config.link.fontSize;\n    fontColor = link.fontColor || config.link.fontColor;\n    fontWeight = highlight ? config.link.highlightFontWeight : config.link.fontWeight;\n  }\n\n  return {\n    className: CONST.LINK_CLASS_NAME,\n    d,\n    fontColor,\n    fontSize: fontSize * t,\n    fontWeight,\n    label,\n    markerId,\n    mouseCursor: config.link.mouseCursor,\n    opacity,\n    source,\n    stroke,\n    strokeWidth,\n    target,\n    onClickLink: linkCallbacks.onClickLink,\n    onMouseOutLink: linkCallbacks.onMouseOutLink,\n    onMouseOverLink: linkCallbacks.onMouseOverLink,\n    onRightClickLink: linkCallbacks.onRightClickLink\n  };\n}\n/**\n * Build some Node properties based on given parameters.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} nodeCallbacks - same as {@link #graphrenderer|nodeCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns object that contain Link props ready to be feeded to the Link component.\n * @memberof Graph/builder\n */\n\n\nfunction buildNodeProps(node, config, nodeCallbacks = {}, highlightedNode, highlightedLink, transform) {\n  const highlight = node.highlighted || node.id === (highlightedLink && highlightedLink.source) || node.id === (highlightedLink && highlightedLink.target);\n\n  const opacity = _getNodeOpacity(node, highlightedNode, highlightedLink, config);\n\n  let fill = node.color || config.node.color;\n\n  if (highlight && config.node.highlightColor !== CONST.KEYWORDS.SAME) {\n    fill = config.node.highlightColor;\n  }\n\n  let stroke = node.strokeColor || config.node.strokeColor;\n\n  if (highlight && config.node.highlightStrokeColor !== CONST.KEYWORDS.SAME) {\n    stroke = config.node.highlightStrokeColor;\n  }\n\n  let label = node[config.node.labelProperty] || node.id;\n\n  if (typeof config.node.labelProperty === \"function\") {\n    label = config.node.labelProperty(node);\n  }\n\n  let strokeWidth = node.strokeWidth || config.node.strokeWidth;\n\n  if (highlight && config.node.highlightStrokeWidth !== CONST.KEYWORDS.SAME) {\n    strokeWidth = config.node.highlightStrokeWidth;\n  }\n\n  const t = 1 / transform;\n  const nodeSize = node.size || config.node.size;\n  const fontSize = highlight ? config.node.highlightFontSize : config.node.fontSize;\n  const dx = fontSize * t + nodeSize / 100 + 1.5;\n  const svg = node.svg || config.node.svg;\n  const fontColor = node.fontColor || config.node.fontColor;\n  return { ...node,\n    className: CONST.NODE_CLASS_NAME,\n    cursor: config.node.mouseCursor,\n    cx: (node === null || node === void 0 ? void 0 : node.x) || \"0\",\n    cy: (node === null || node === void 0 ? void 0 : node.y) || \"0\",\n    dx,\n    fill,\n    fontColor,\n    fontSize: fontSize * t,\n    fontWeight: highlight ? config.node.highlightFontWeight : config.node.fontWeight,\n    id: node.id,\n    label,\n    opacity,\n    overrideGlobalViewGenerator: !node.viewGenerator && node.svg,\n    renderLabel: node.renderLabel || config.node.renderLabel,\n    size: nodeSize * t,\n    stroke,\n    strokeWidth: strokeWidth * t,\n    svg,\n    type: node.symbolType || config.node.symbolType,\n    viewGenerator: node.viewGenerator || config.node.viewGenerator,\n    onClickNode: nodeCallbacks.onClickNode,\n    onMouseOut: nodeCallbacks.onMouseOut,\n    onMouseOverNode: nodeCallbacks.onMouseOverNode,\n    onRightClickNode: nodeCallbacks.onRightClickNode\n  };\n}\n\nexport { buildLinkProps, buildNodeProps };","map":{"version":3,"sources":["/Users/acarn506/Desktop/SWE-Project/s2020-djma/algo_interact/frontend/src/components/Node/components/graph/graph.builder.js"],"names":["CONST","buildLinkPathDefinition","getMarkerId","_getNodeOpacity","node","highlightedNode","highlightedLink","config","highlight","highlighted","id","source","target","someLinkHighlighted","someNodeHighlighted","opacity","highlightDegree","highlightOpacity","buildLinkProps","link","nodes","links","linkCallbacks","transform","x1","x","y1","y","x2","y2","type","d","mainNodeParticipates","guiltyNode","guiltyLink","stroke","color","highlightColor","KEYWORDS","SAME","strokeWidth","semanticStrokeWidth","linkValue","markerId","directed","t","fontSize","fontColor","fontWeight","label","renderLabel","labelProperty","highlightFontWeight","className","LINK_CLASS_NAME","mouseCursor","onClickLink","onMouseOutLink","onMouseOverLink","onRightClickLink","buildNodeProps","nodeCallbacks","fill","strokeColor","highlightStrokeColor","highlightStrokeWidth","nodeSize","size","highlightFontSize","dx","svg","NODE_CLASS_NAME","cursor","cx","cy","overrideGlobalViewGenerator","viewGenerator","symbolType","onClickNode","onMouseOut","onMouseOverNode","onRightClickNode"],"mappings":"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","sourcesContent":["/**\n * @module Graph/builder\n * @description\n * Offers a series of methods that isolate the way graph elements are built (nodes and links mainly).\n */\nimport CONST from \"./graph.const\";\n\nimport { buildLinkPathDefinition } from \"../link/link.helper\";\nimport { getMarkerId } from \"../marker/marker.helper\";\n\n/**\n * Get the correct node opacity in order to properly make decisions based on context such as currently highlighted node.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @returns {number} the opacity value for the given node.\n * @memberof Graph/builder\n */\nfunction _getNodeOpacity(node, highlightedNode, highlightedLink, config) {\n    const highlight =\n        node.highlighted ||\n        node.id === (highlightedLink && highlightedLink.source) ||\n        node.id === (highlightedLink && highlightedLink.target);\n    const someLinkHighlighted = highlightedLink && highlightedLink.source && highlightedLink.target;\n    const someNodeHighlighted = !!(highlightedNode || someLinkHighlighted);\n\n    let opacity;\n\n    if (someNodeHighlighted && config.highlightDegree === 0) {\n        opacity = highlight ? config.node.opacity : config.highlightOpacity;\n    } else if (someNodeHighlighted) {\n        opacity = highlight ? config.node.opacity : config.highlightOpacity;\n    } else {\n        opacity = node.opacity || config.node.opacity;\n    }\n\n    return opacity;\n}\n\n/**\n * Build some Link properties based on given parameters.\n * @param  {Object} link - the link object for which we will generate properties.\n * @param  {Object.<string, Object>} nodes - same as {@link #graphrenderer|nodes in renderGraph}.\n * @param  {Object.<string, Object>} links - same as {@link #graphrenderer|links in renderGraph}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} linkCallbacks - same as {@link #graphrenderer|linkCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns an object that aggregates all props for creating respective Link component instance.\n * @memberof Graph/builder\n */\nfunction buildLinkProps(link, nodes, links, config, linkCallbacks, highlightedNode, highlightedLink, transform) {\n    const { source, target } = link;\n    const x1 = nodes?.[source]?.x || 0;\n    const y1 = nodes?.[source]?.y || 0;\n    const x2 = nodes?.[target]?.x || 0;\n    const y2 = nodes?.[target]?.y || 0;\n    const type = link.type || config.link.type;\n    const d = buildLinkPathDefinition({ source: { x: x1, y: y1 }, target: { x: x2, y: y2 } }, type);\n\n    let mainNodeParticipates = false;\n\n    switch (config.highlightDegree) {\n        case 0:\n            break;\n        case 2:\n            mainNodeParticipates = true;\n            break;\n        default:\n            // 1st degree is the fallback behavior\n            mainNodeParticipates = source === highlightedNode || target === highlightedNode;\n            break;\n    }\n\n    const guiltyNode = mainNodeParticipates && nodes[source].highlighted && nodes[target].highlighted;\n    const guiltyLink =\n        source === (highlightedLink && highlightedLink.source) &&\n        target === (highlightedLink && highlightedLink.target);\n    const highlight = guiltyNode || guiltyLink;\n\n    let opacity = link.opacity || config.link.opacity;\n\n    if (highlightedNode || (highlightedLink && highlightedLink.source)) {\n        opacity = highlight ? config.link.opacity : config.highlightOpacity;\n    }\n\n    let stroke = link.color || config.link.color;\n\n    if (highlight) {\n        stroke = config.link.highlightColor === CONST.KEYWORDS.SAME ? config.link.color : config.link.highlightColor;\n    }\n\n    let strokeWidth = (link.strokeWidth || config.link.strokeWidth) * (1 / transform);\n\n    if (config.link.semanticStrokeWidth) {\n        const linkValue = links[source][target] || links[target][source] || 1;\n\n        strokeWidth += (linkValue * strokeWidth) / 10;\n    }\n\n    const markerId = config.directed ? getMarkerId(highlight, transform, config) : null;\n\n    const t = 1 / transform;\n\n    let fontSize = null,\n        fontColor = null,\n        fontWeight = null,\n        label = null;\n\n    if (config.link.renderLabel) {\n        if (typeof config.link.labelProperty === \"function\") {\n            label = config.link.labelProperty(link);\n        } else {\n            label = link[config.link.labelProperty];\n        }\n\n        fontSize = link.fontSize || config.link.fontSize;\n        fontColor = link.fontColor || config.link.fontColor;\n        fontWeight = highlight ? config.link.highlightFontWeight : config.link.fontWeight;\n    }\n\n    return {\n        className: CONST.LINK_CLASS_NAME,\n        d,\n        fontColor,\n        fontSize: fontSize * t,\n        fontWeight,\n        label,\n        markerId,\n        mouseCursor: config.link.mouseCursor,\n        opacity,\n        source,\n        stroke,\n        strokeWidth,\n        target,\n        onClickLink: linkCallbacks.onClickLink,\n        onMouseOutLink: linkCallbacks.onMouseOutLink,\n        onMouseOverLink: linkCallbacks.onMouseOverLink,\n        onRightClickLink: linkCallbacks.onRightClickLink,\n    };\n}\n\n/**\n * Build some Node properties based on given parameters.\n * @param  {Object} node - the node object for whom we will generate properties.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} nodeCallbacks - same as {@link #graphrenderer|nodeCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns object that contain Link props ready to be feeded to the Link component.\n * @memberof Graph/builder\n */\nfunction buildNodeProps(node, config, nodeCallbacks = {}, highlightedNode, highlightedLink, transform) {\n    const highlight =\n        node.highlighted ||\n        (node.id === (highlightedLink && highlightedLink.source) ||\n            node.id === (highlightedLink && highlightedLink.target));\n    const opacity = _getNodeOpacity(node, highlightedNode, highlightedLink, config);\n\n    let fill = node.color || config.node.color;\n\n    if (highlight && config.node.highlightColor !== CONST.KEYWORDS.SAME) {\n        fill = config.node.highlightColor;\n    }\n\n    let stroke = node.strokeColor || config.node.strokeColor;\n\n    if (highlight && config.node.highlightStrokeColor !== CONST.KEYWORDS.SAME) {\n        stroke = config.node.highlightStrokeColor;\n    }\n\n    let label = node[config.node.labelProperty] || node.id;\n\n    if (typeof config.node.labelProperty === \"function\") {\n        label = config.node.labelProperty(node);\n    }\n\n    let strokeWidth = node.strokeWidth || config.node.strokeWidth;\n\n    if (highlight && config.node.highlightStrokeWidth !== CONST.KEYWORDS.SAME) {\n        strokeWidth = config.node.highlightStrokeWidth;\n    }\n\n    const t = 1 / transform;\n    const nodeSize = node.size || config.node.size;\n    const fontSize = highlight ? config.node.highlightFontSize : config.node.fontSize;\n    const dx = fontSize * t + nodeSize / 100 + 1.5;\n    const svg = node.svg || config.node.svg;\n    const fontColor = node.fontColor || config.node.fontColor;\n\n    return {\n        ...node,\n        className: CONST.NODE_CLASS_NAME,\n        cursor: config.node.mouseCursor,\n        cx: node?.x || \"0\",\n        cy: node?.y || \"0\",\n        dx,\n        fill,\n        fontColor,\n        fontSize: fontSize * t,\n        fontWeight: highlight ? config.node.highlightFontWeight : config.node.fontWeight,\n        id: node.id,\n        label,\n        opacity,\n        overrideGlobalViewGenerator: !node.viewGenerator && node.svg,\n        renderLabel: node.renderLabel || config.node.renderLabel,\n        size: nodeSize * t,\n        stroke,\n        strokeWidth: strokeWidth * t,\n        svg,\n        type: node.symbolType || config.node.symbolType,\n        viewGenerator: node.viewGenerator || config.node.viewGenerator,\n        onClickNode: nodeCallbacks.onClickNode,\n        onMouseOut: nodeCallbacks.onMouseOut,\n        onMouseOverNode: nodeCallbacks.onMouseOverNode,\n        onRightClickNode: nodeCallbacks.onRightClickNode,\n    };\n}\n\nexport { buildLinkProps, buildNodeProps };\n"]},"metadata":{},"sourceType":"module"}